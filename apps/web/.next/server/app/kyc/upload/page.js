(()=>{var e={};e.id=802,e.ids=[802],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},3923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(7544),r(7718),r(7824);var a=r(3282),s=r(5736),i=r(3906),l=r.n(i),n=r(6880),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let o=["",{children:["kyc",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7544)),"/Users/bineshbalan/pcl/apps/web/src/app/kyc/upload/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1572))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,9908))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,7718)),"/Users/bineshbalan/pcl/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1572))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,9908))).default(e)],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/bineshbalan/pcl/apps/web/src/app/kyc/upload/page.tsx"],u="/kyc/upload/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/kyc/upload/page",pathname:"/kyc/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8406:()=>{},433:(e,t,r)=>{Promise.resolve().then(r.bind(r,2753))},9469:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},2753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(3227),s=r(3677),i=r(1043),l=r(164),n=r(1250),d=r(3956),o=r(3414),c=r(7761),u=r(9580);let p=[{value:"national_id",label:"National ID Card",required:!0},{value:"passport",label:"Passport",required:!1},{value:"drivers_license",label:"Driver's License",required:!1},{value:"proof_of_address",label:"Proof of Address (Utility Bill)",required:!0},{value:"birth_certificate",label:"Birth Certificate",required:!1},{value:"other",label:"Other Document",required:!1}];function m(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)(null),[m,f]=(0,s.useState)(null),[x,b]=(0,s.useState)(!1),[g,h]=(0,s.useState)([{type:"national_id",file:null,preview:null,number:"",expiryDate:""},{type:"proof_of_address",file:null,preview:null,number:"",expiryDate:""}]),v=(e,t)=>{if(!t)return;if(t.size>5242880){r("File size must be less than 5MB");return}if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(t.type)){r("File must be JPG, PNG, or PDF");return}r(null);let a=[...g];if(a[e].file=t,t.type.startsWith("image/")){let r=new FileReader;r.onloadend=()=>{a[e].preview=r.result,h(a)},r.readAsDataURL(t)}else a[e].preview=null,h(a)},y=e=>{h(g.filter((t,r)=>r!==e))},j=async t=>{t.preventDefault(),r(null),f(null),b(!0);try{let t=(0,l.e)(),{data:{user:a}}=await t.auth.getUser();if(!a){r("Not authenticated");return}let s=g.some(e=>"national_id"===e.type&&e.file),i=g.some(e=>"proof_of_address"===e.type&&e.file);if(!s){r("National ID is required");return}if(!i){r("Proof of Address is required");return}for(let e of g){if(!e.file)continue;let s=e.file.name.split(".").pop(),i=`${a.id}/${e.type}_${Date.now()}.${s}`,{error:l}=await t.storage.from("kyc-documents").upload(i,e.file,{cacheControl:"3600",upsert:!1});if(l){r(`Upload failed for ${e.type}: ${l.message}`);return}let{data:{publicUrl:n}}=t.storage.from("kyc-documents").getPublicUrl(i),{error:d}=await t.from("kyc_documents").insert({user_id:a.id,document_type:e.type,document_number:e.number||null,document_url:i,expires_at:e.expiryDate||null,status:"pending"});if(d){r(`Database error for ${e.type}: ${d.message}`);return}}await t.from("users").update({kyc_status:"pending"}).eq("id",a.id),f("KYC documents uploaded successfully! Your submission is under review."),setTimeout(()=>{e.push("/dashboard/player")},2e3)}catch(e){r(e instanceof Error?e.message:"An error occurred")}finally{b(!1)}};return(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[t&&a.jsx(c.bZ,{variant:"destructive",children:t}),m&&a.jsx(c.bZ,{variant:"success",children:m}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Required Documents"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• National ID Card (mandatory)"}),a.jsx("li",{children:"• Proof of Address - Utility bill, bank statement (mandatory)"}),a.jsx("li",{children:"• Additional documents are optional"}),a.jsx("li",{children:"• File size: Max 5MB per file"}),a.jsx("li",{children:"• Formats: JPG, PNG, PDF"})]})]}),g.map((e,t)=>(0,a.jsxs)(u.Zb,{className:"border-2",children:[a.jsx(u.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(u.ll,{className:"text-lg",children:[p.find(t=>t.value===e.type)?.label,p.find(t=>t.value===e.type)?.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx(u.SZ,{children:"Upload a clear photo or scan of your document"})]}),t>=2&&a.jsx(n.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(t),children:"Remove"})]})}),(0,a.jsxs)(u.aY,{className:"space-y-4",children:[t>=2&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{children:"Document Type"}),a.jsx("select",{value:e.type,onChange:e=>{let r=[...g];r[t].type=e.target.value,h(r)},className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.filter(e=>!e.required).map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{children:"Upload Document"}),a.jsx(d.I,{type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:e=>v(t,e.target.files?.[0]||null),required:p.find(t=>t.value===e.type)?.required}),e.preview&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:e.preview,alt:"Document preview",className:"max-w-xs h-auto rounded border"})}),e.file&&!e.preview&&(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["\uD83D\uDCC4 ",e.file.name," (",(e.file.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{children:"Document Number (Optional)"}),a.jsx(d.I,{type:"text",placeholder:"e.g., ID123456789",value:e.number,onChange:e=>{let r=[...g];r[t].number=e.target.value,h(r)}})]}),"proof_of_address"!==e.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{children:"Expiry Date (Optional)"}),a.jsx(d.I,{type:"date",value:e.expiryDate,onChange:e=>{let r=[...g];r[t].expiryDate=e.target.value,h(r)},min:new Date().toISOString().split("T")[0]})]})]})]},t)),a.jsx("div",{className:"flex gap-4",children:a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>{h([...g,{type:"other",file:null,preview:null,number:"",expiryDate:""}])},disabled:x,children:"+ Add Another Document"})}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx(n.z,{type:"submit",disabled:x,className:"flex-1",children:x?"Uploading...":"Submit for Verification"}),a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>e.push("/dashboard/player"),disabled:x,children:"Cancel"})]})]})}function f(){(0,i.useRouter)();let[e,t]=(0,s.useState)(!0),[r,l]=(0,s.useState)(null);return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-slate-600",children:"Loading..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[a.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-between items-center h-16",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"PCL Logo",className:"h-10 w-10"}),a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent",children:"PCL"})]})})})}),a.jsx("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"KYC Verification"}),a.jsx("p",{className:"text-slate-600",children:"Upload your identification documents to get verified and appear in club searches"})]}),a.jsx(m,{})]})})]})}},7761:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>o,X:()=>c,bZ:()=>d});var a=r(3227),s=r(3677),i=r(1086),l=r(8755);let n=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-red-500/50 text-red-600 dark:border-red-500 [&>svg]:text-red-600",success:"border-green-500/50 text-green-600 dark:border-green-500 [&>svg]:text-green-600",warning:"border-yellow-500/50 text-yellow-600 dark:border-yellow-500 [&>svg]:text-yellow-600"}},defaultVariants:{variant:"default"}}),d=s.forwardRef(({className:e,variant:t,...r},s)=>a.jsx("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:t}),e),...r}));d.displayName="Alert";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));o.displayName="AlertTitle";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},1250:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var a=r(3227),s=r(3677),i=r(594),l=r(1086),n=r(8755);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...l},o)=>{let c=s?i.g7:"button";return a.jsx(c,{className:(0,n.cn)(d({variant:t,size:r,className:e})),ref:o,...l})});o.displayName="Button"},9580:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>n,SZ:()=>o,Zb:()=>l,aY:()=>c,eW:()=>u,ll:()=>d});var a=r(3227),s=r(3677),i=r(8755);let l=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));l.displayName="Card";let n=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("h2",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));o.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},3956:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var a=r(3227),s=r(3677),i=r(8755);let l=s.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",e),ref:s,...r}));l.displayName="Input"},3414:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var a=r(3227),s=r(3677),i=r(1706),l=r(1086),n=r(8755);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef(({className:e,...t},r)=>a.jsx(i.f,{ref:r,className:(0,n.cn)(d(),e),...t}));o.displayName=i.f.displayName},164:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var a=r(1230);let s=()=>(0,a.createBrowserClient)("https://uvifkmkdoiohqrdbwgzt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2aWZrbWtkb2lvaHFyZGJ3Z3p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNTA0MjMsImV4cCI6MjA4MTYyNjQyM30.fbFwh2HBKd4pjImw88hhG4-VuBxWaLDoIpcpZvjHD3o")},8755:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(1126),s=r(2890);function i(...e){return(0,s.m6)((0,a.W)(e))}},1043:(e,t,r)=>{"use strict";var a=r(2854);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(3189).createProxy)(String.raw`/Users/bineshbalan/pcl/apps/web/src/app/kyc/upload/page.tsx#default`)},7718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var a=r(9013);r(5556);let s={title:"Professional Club League - PCL",description:"A comprehensive platform for organizing professional sports leagues and tournaments",icons:{icon:"/favicon.ico",apple:"/logo.png"}};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:e})})}},9908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i}),r(9013);var a=r(7201);let s={runtime:"edge",size:{width:180,height:180},contentType:"image/png"};async function i(e){let{__metadata_id__:t,...r}=e.params,i=(0,a.fillMetadataSegment)(".",r,"apple-icon"),{generateImageMetadata:l}=s;function n(e,t){let r={alt:e.alt,type:e.contentType||"image/png",url:i+(t?"/"+t:"")+"?48eed7a562f2068c"},{size:a}=e;return a&&(r.sizes=a.width+"x"+a.height),r}return l?(await l({params:r})).map((e,t)=>{let r=(e.id||t)+"";return n(e,r)}):[n(s,"")]}},1572:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i}),r(9013);var a=r(7201);let s={runtime:"edge",size:{width:32,height:32},contentType:"image/png"};async function i(e){let{__metadata_id__:t,...r}=e.params,i=(0,a.fillMetadataSegment)(".",r,"icon"),{generateImageMetadata:l}=s;function n(e,t){let r={alt:e.alt,type:e.contentType||"image/png",url:i+(t?"/"+t:"")+"?b1ec6aec20530dd1"},{size:a}=e;return a&&(r.sizes=a.width+"x"+a.height),r}return l?(await l({params:r})).map((e,t)=>{let r=(e.id||t)+"";return n(e,r)}):[n(s,"")]}},5556:()=>{},1706:(e,t,r)=>{"use strict";r.d(t,{f:()=>d});var a=r(3677);r(2812);var s=r(594),i=r(3227),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,s.Z8)(`Primitive.${t}`),l=a.forwardRef((e,a)=>{let{asChild:s,...l}=e,n=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n,{...l,ref:a})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),n=a.forwardRef((e,t)=>(0,i.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var d=n}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[193,679,201,230,778],()=>r(3923));module.exports=a})();