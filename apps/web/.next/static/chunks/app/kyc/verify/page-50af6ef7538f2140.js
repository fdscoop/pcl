(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685,138],{3749:function(e,t,r){Promise.resolve().then(r.bind(r,6816))},6816:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(7573),a=r(7653),l=r(1695),n=r(7138),i=r(466),d=r(9134),c=r(6529),o=r(2196),u=r(7056);function f(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(null),[f,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[p,v]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[D,C]=(0,a.useState)(!1),[k,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let t=(0,n.createClient)(),{data:{user:s}}=await t.auth.getUser();if(!s){e.push("/auth/login");return}let{data:a}=await t.from("users").select("*, players(*)").eq("id",s.id).single();if(r(a),(null==a?void 0:a.kyc_status)==="verified"){e.push("/dashboard/player");return}}catch(e){console.error("Error loading user:",e)}finally{x(!1)}})()},[e]);let T=e=>{let t=e.replace(/\s/g,"");return!!/^\d{12}$/.test(t)},O=async()=>{try{if(v(null),j(null),P(!0),!T(m)){v("Please enter a valid 12-digit Aadhaar number"),P(!1);return}await new Promise(e=>setTimeout(e,1500)),console.log("\uD83D\uDD10 DUMMY: Generating OTP for Aadhaar:",m),console.log("\uD83D\uDCF1 DUMMY: OTP sent to registered mobile number"),console.log("\uD83C\uDFAF DUMMY: Use OTP: 123456 for testing"),w(!0),j("OTP sent to your registered mobile number. Please check your phone.")}catch(e){v(e instanceof Error?e.message:"Failed to generate OTP")}finally{P(!1)}},I=async()=>{try{var r,s;if(v(null),j(null),C(!0),6!==g.length){v("Please enter a valid 6-digit OTP"),C(!1);return}if(await new Promise(e=>setTimeout(e,1500)),"123456"!==g){v("Invalid OTP. Please try again. (For testing, use: 123456)"),C(!1);return}console.log("✅ DUMMY: OTP verified successfully"),console.log("\uD83D\uDCDD DUMMY: Updating KYC status to verified");let a=(0,n.createClient)(),{error:l}=await a.from("users").update({kyc_status:"verified",kyc_verified_at:new Date().toISOString(),aadhaar_number:m.replace(/\s/g,"")}).eq("id",t.id);if(l)throw l;(null===(s=t.players)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.id)&&await a.from("players").update({is_available_for_scout:!0}).eq("id",t.players[0].id),j("✅ KYC Verification Successful! You are now verified and searchable by clubs."),setTimeout(()=>{e.push("/dashboard/player")},2e3)}catch(e){v(e instanceof Error?e.message:"Failed to verify OTP")}finally{C(!1)}},Y=async()=>{b(""),w(!1),await O()};return f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-slate-600",children:"Loading..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,s.jsx)("nav",{className:"bg-white border-b border-slate-200 shadow-sm",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("img",{src:"/logo.png",alt:"PCL Logo",className:"h-10 w-10"}),(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent",children:"PCL"})]}),(0,s.jsx)(i.z,{onClick:()=>e.push("/dashboard/player"),variant:"outline",size:"sm",children:"Back to Dashboard"})]})})}),(0,s.jsxs)("main",{className:"max-w-2xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{className:"text-2xl",children:"KYC Verification"}),(0,s.jsx)(o.SZ,{children:"Verify your identity using Aadhaar to become searchable by clubs"})]}),(0,s.jsxs)(o.aY,{className:"space-y-6",children:[(0,s.jsx)(u.bZ,{className:"border-blue-200 bg-blue-50",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"text-2xl",children:"ℹ️"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(u.Cd,{className:"text-blue-900 mb-2",children:"Why KYC Verification?"}),(0,s.jsx)(u.X,{className:"text-blue-800 space-y-2",children:(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,s.jsx)("li",{children:"Verify your identity for tournament participation"}),(0,s.jsx)("li",{children:"Become searchable by verified clubs in your district"}),(0,s.jsx)("li",{children:"Receive contract offers from professional clubs"}),(0,s.jsx)("li",{children:"Participate in DQL and other competitive tournaments"})]})})]})]})}),y&&(0,s.jsx)(u.bZ,{className:"border-green-200 bg-green-50",children:(0,s.jsx)(u.Cd,{className:"text-green-900",children:y})}),p&&(0,s.jsx)(u.bZ,{variant:"destructive",children:(0,s.jsx)(u.Cd,{children:p})}),!N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"aadhaar",children:"Aadhaar Number *"}),(0,s.jsx)(d.I,{id:"aadhaar",type:"text",placeholder:"XXXX XXXX XXXX",value:m,onChange:e=>{var t;let r=e.target.value.replace(/\s/g,"");r.length>12&&(r=r.slice(0,12)),h((null===(t=r.match(/.{1,4}/g))||void 0===t?void 0:t.join(" "))||r)},maxLength:14,disabled:k}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Enter your 12-digit Aadhaar number"})]}),(0,s.jsx)(i.z,{onClick:O,disabled:k||!m,className:"w-full",children:k?"Generating OTP...":"Generate OTP"}),(0,s.jsx)(u.bZ,{className:"border-yellow-200 bg-yellow-50",children:(0,s.jsxs)(u.X,{className:"text-yellow-800 text-sm",children:[(0,s.jsx)("strong",{children:"Testing Mode:"})," This is a dummy implementation. Enter any 12-digit number as Aadhaar. You'll receive OTP: ",(0,s.jsx)("code",{className:"bg-yellow-200 px-1 rounded",children:"123456"})," for verification."]})})]}),N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCF1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-green-900",children:"OTP Sent Successfully"}),(0,s.jsxs)("p",{className:"text-sm text-green-800 mt-1",children:["An OTP has been sent to the mobile number registered with Aadhaar ending in ****",m.replace(/\s/g,"").slice(-4)]})]})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"otp",children:"Enter OTP *"}),(0,s.jsx)(d.I,{id:"otp",type:"text",placeholder:"000000",value:g,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=6&&b(t)},maxLength:6,disabled:D,className:"text-center text-2xl tracking-widest"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Enter the 6-digit OTP sent to your mobile"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.z,{onClick:I,disabled:D||6!==g.length,className:"flex-1",children:D?"Verifying...":"Verify OTP"}),(0,s.jsx)(i.z,{onClick:Y,variant:"outline",disabled:k,children:"Resend OTP"})]}),(0,s.jsx)(u.bZ,{className:"border-yellow-200 bg-yellow-50",children:(0,s.jsxs)(u.X,{className:"text-yellow-800 text-sm",children:[(0,s.jsx)("strong",{children:"Testing Mode:"})," Use OTP: ",(0,s.jsx)("code",{className:"bg-yellow-200 px-1 rounded font-mono",children:"123456"})," to verify."]})})]}),(0,s.jsx)(u.bZ,{className:"border-slate-200 bg-slate-50",children:(0,s.jsxs)(u.X,{className:"text-slate-600 text-xs",children:[(0,s.jsx)("strong",{children:"\uD83D\uDD12 Secure & Private:"})," Your Aadhaar details are encrypted and stored securely. We comply with UIDAI guidelines and never share your personal information."]})})]})]}),(0,s.jsxs)(o.Zb,{className:"mt-6",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{className:"text-lg",children:"After Verification"})}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"✓"}),(0,s.jsx)("span",{children:"Your profile will be marked as verified"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"✓"}),(0,s.jsx)("span",{children:"You'll become searchable by verified club owners in your district"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"✓"}),(0,s.jsx)("span",{children:"Clubs can send you contract offers"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"✓"}),(0,s.jsx)("span",{children:"You can participate in DQL and competitive tournaments"})]})]})})]})]})]})}},7056:function(e,t,r){"use strict";r.d(t,{Cd:function(){return c},X:function(){return o},bZ:function(){return d}});var s=r(7573),a=r(7653),l=r(9289),n=r(9147);let i=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-red-500/50 text-red-600 dark:border-red-500 [&>svg]:text-red-600",success:"border-green-500/50 text-green-600 dark:border-green-500 [&>svg]:text-green-600",warning:"border-yellow-500/50 text-yellow-600 dark:border-yellow-500 [&>svg]:text-yellow-600"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:a}),r),...l})});d.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});c.displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});o.displayName="AlertDescription"},466:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7573),a=r(7653),l=r(5814),n=r(9289),i=r(9147);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...o}=e,u=c?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:r})),ref:t,...o})});c.displayName="Button"},2196:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var s=r(7573),a=r(7653),l=r(9147);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h2",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},9134:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var s=r(7573),a=r(7653),l=r(9147);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",r),ref:t,...n})});n.displayName="Input"},6529:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var s=r(7573),a=r(7653),l=r(3972),n=r(9289),i=r(9147);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,i.cn)(d(),r),...a})});c.displayName=l.f.displayName},7138:function(e,t,r){"use strict";r.d(t,{createClient:function(){return a}});var s=r(845);let a=()=>(0,s.createBrowserClient)("https://uvifkmkdoiohqrdbwgzt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2aWZrbWtkb2lvaHFyZGJ3Z3p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNTA0MjMsImV4cCI6MjA4MTYyNjQyM30.fbFwh2HBKd4pjImw88hhG4-VuBxWaLDoIpcpZvjHD3o")},9147:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var s=r(607),a=r(5579);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},1695:function(e,t,r){"use strict";var s=r(1219);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},3972:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var s=r(7653);r(3458);var a=r(5814),l=r(7573),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.Z8)(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:a,...n}=e,i=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(i,{...n,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),i=s.forwardRef((e,t)=>(0,l.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var d=i}},function(e){e.O(0,[845,494,293,528,744],function(){return e(e.s=3749)}),_N_E=e.O()}]);